"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/notion-to-md";
exports.ids = ["vendor-chunks/notion-to-md"];
exports.modules = {

/***/ "(rsc)/./node_modules/notion-to-md/build/index.js":
/*!**************************************************!*\
  !*** ./node_modules/notion-to-md/build/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __exportStar = (void 0) && (void 0).__exportStar || function(m, exports1) {\n    for(var p in m)if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports1, p)) __createBinding(exports1, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n__exportStar(__webpack_require__(/*! ./notion-to-md */ \"(rsc)/./node_modules/notion-to-md/build/notion-to-md.js\"), exports); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbm90aW9uLXRvLW1kL2J1aWxkL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsSUFBSUEsa0JBQWtCLENBQUMsTUFBRyxLQUFLLE9BQUcsRUFBRUEsZUFBZSxJQUFNQyxDQUFBQSxPQUFPQyxNQUFNLEdBQUksU0FBU0MsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsRUFBRTtJQUMxRixJQUFJQSxPQUFPQyxXQUFXRCxLQUFLRDtJQUMzQixJQUFJRyxPQUFPUCxPQUFPUSx3QkFBd0IsQ0FBQ0wsR0FBR0M7SUFDOUMsSUFBSSxDQUFDRyxRQUFTLFVBQVNBLE9BQU8sQ0FBQ0osRUFBRU0sVUFBVSxHQUFHRixLQUFLRyxRQUFRLElBQUlILEtBQUtJLFlBQVksR0FBRztRQUNqRkosT0FBTztZQUFFSyxZQUFZO1lBQU1DLEtBQUs7Z0JBQWEsT0FBT1YsQ0FBQyxDQUFDQyxFQUFFO1lBQUU7UUFBRTtJQUM5RDtJQUNBSixPQUFPYyxjQUFjLENBQUNaLEdBQUdHLElBQUlFO0FBQ2pDLElBQU0sU0FBU0wsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsRUFBRTtJQUN0QixJQUFJQSxPQUFPQyxXQUFXRCxLQUFLRDtJQUMzQkYsQ0FBQyxDQUFDRyxHQUFHLEdBQUdGLENBQUMsQ0FBQ0MsRUFBRTtBQUNoQixDQUFDO0FBQ0QsSUFBSVcsZUFBZSxDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLFlBQVksSUFBSyxTQUFTWixDQUFDLEVBQUVhLFFBQU87SUFDakUsSUFBSyxJQUFJQyxLQUFLZCxFQUFHLElBQUljLE1BQU0sYUFBYSxDQUFDakIsT0FBT2tCLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNKLFVBQVNDLElBQUlsQixnQkFBZ0JpQixVQUFTYixHQUFHYztBQUMzSDtBQUNBakIsOENBQTZDO0lBQUVxQixPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdETixhQUFhTyxtQkFBT0EsQ0FBQywrRUFBZ0IsR0FBR04sVUFDeEMsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2F0aGVyaW5lLXBvcnRmb2xpby8uL25vZGVfbW9kdWxlcy9ub3Rpb24tdG8tbWQvYnVpbGQvaW5kZXguanM/ZjBhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL25vdGlvbi10by1tZFwiKSwgZXhwb3J0cyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOlsiX19jcmVhdGVCaW5kaW5nIiwiT2JqZWN0IiwiY3JlYXRlIiwibyIsIm0iLCJrIiwiazIiLCJ1bmRlZmluZWQiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX19lc01vZHVsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsImRlZmluZVByb3BlcnR5IiwiX19leHBvcnRTdGFyIiwiZXhwb3J0cyIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJ2YWx1ZSIsInJlcXVpcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/notion-to-md/build/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/notion-to-md/build/notion-to-md.js":
/*!*********************************************************!*\
  !*** ./node_modules/notion-to-md/build/notion-to-md.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __setModuleDefault = (void 0) && (void 0).__setModuleDefault || (Object.create ? function(o, v) {\n    Object.defineProperty(o, \"default\", {\n        enumerable: true,\n        value: v\n    });\n} : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (void 0) && (void 0).__importStar || function(mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) {\n        for(var k in mod)if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    }\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.NotionToMarkdown = void 0;\nconst md = __importStar(__webpack_require__(/*! ./utils/md */ \"(rsc)/./node_modules/notion-to-md/build/utils/md.js\"));\nconst notion_1 = __webpack_require__(/*! ./utils/notion */ \"(rsc)/./node_modules/notion-to-md/build/utils/notion.js\");\n/**\n * Converts a Notion page to Markdown.\n */ class NotionToMarkdown {\n    constructor(options){\n        this.notionClient = options.notionClient;\n        const defaultConfig = {\n            separateChildPage: false,\n            convertImagesToBase64: false,\n            parseChildPages: true\n        };\n        this.config = {\n            ...defaultConfig,\n            ...options.config\n        };\n        this.customTransformers = {};\n    }\n    setCustomTransformer(type, transformer) {\n        this.customTransformers[type] = transformer;\n        return this;\n    }\n    /**\n     * Converts Markdown Blocks to string\n     * @param {MdBlock[]} mdBlocks - Array of markdown blocks\n     * @param {number} nestingLevel - Defines max depth of nesting\n     * @returns {MdStringObject} - Returns markdown string with child pages separated\n     */ toMarkdownString(mdBlocks = [], pageIdentifier = \"parent\", nestingLevel = 0) {\n        let mdOutput = {};\n        mdBlocks.forEach((mdBlocks)=>{\n            // NOTE: toggle in the child blocks logic\n            // adding a toggle check prevents duplicate\n            // rendering of toggle title\n            var _a;\n            // process parent blocks\n            if (mdBlocks.parent && mdBlocks.type !== \"toggle\" && mdBlocks.type !== \"child_page\") {\n                if (mdBlocks.type !== \"to_do\" && mdBlocks.type !== \"bulleted_list_item\" && mdBlocks.type !== \"numbered_list_item\" && mdBlocks.type !== \"quote\") {\n                    // initialize if key doesn't exist\n                    mdOutput[pageIdentifier] = mdOutput[pageIdentifier] || \"\";\n                    // add extra line breaks non list blocks\n                    mdOutput[pageIdentifier] += `\\n${md.addTabSpace(mdBlocks.parent, nestingLevel)}\\n\\n`;\n                } else {\n                    // initialize if key doesn't exist\n                    mdOutput[pageIdentifier] = mdOutput[pageIdentifier] || \"\";\n                    mdOutput[pageIdentifier] += `${md.addTabSpace(mdBlocks.parent, nestingLevel)}\\n`;\n                }\n            }\n            // process child blocks\n            if (mdBlocks.children && mdBlocks.children.length > 0) {\n                if (mdBlocks.type === \"synced_block\" || mdBlocks.type === \"column_list\" || mdBlocks.type === \"column\") {\n                    let mdstr = this.toMarkdownString(mdBlocks.children, pageIdentifier);\n                    mdOutput[pageIdentifier] = mdOutput[pageIdentifier] || \"\";\n                    Object.keys(mdstr).forEach((key)=>{\n                        if (mdOutput[key]) {\n                            mdOutput[key] += mdstr[key];\n                        } else {\n                            mdOutput[key] = mdstr[key];\n                        }\n                    });\n                } else if (mdBlocks.type === \"child_page\") {\n                    const childPageTitle = mdBlocks.parent;\n                    let mdstr = this.toMarkdownString(mdBlocks.children, childPageTitle);\n                    if (this.config.separateChildPage) {\n                        mdOutput = {\n                            ...mdOutput,\n                            ...mdstr\n                        };\n                    } else {\n                        mdOutput[pageIdentifier] = mdOutput[pageIdentifier] || \"\";\n                        if (mdstr[childPageTitle]) {\n                            // child page heading followed by child page content\n                            mdOutput[pageIdentifier] += `\\n${childPageTitle}\\n${mdstr[childPageTitle]}`;\n                        }\n                    }\n                } else if (mdBlocks.type === \"toggle\") {\n                    // convert children md object to md string\n                    const toggle_children_md_string = this.toMarkdownString(mdBlocks.children);\n                    mdOutput[pageIdentifier] = mdOutput[pageIdentifier] || \"\";\n                    mdOutput[pageIdentifier] += md.toggle(mdBlocks.parent, toggle_children_md_string[\"parent\"]);\n                } else if (mdBlocks.type === \"quote\") {\n                    let mdstr = this.toMarkdownString(mdBlocks.children, pageIdentifier, nestingLevel);\n                    const formattedContent = ((_a = mdstr.parent) !== null && _a !== void 0 ? _a : mdstr[pageIdentifier]).split(\"\\n\").map((line)=>line.trim() ? `> ${line}` : \">\").join(\"\\n\").trim();\n                    mdOutput[pageIdentifier] = mdOutput[pageIdentifier] || \"\";\n                    if (pageIdentifier !== \"parent\" && mdstr[\"parent\"]) {\n                        mdOutput[pageIdentifier] += formattedContent;\n                    } else if (mdstr[pageIdentifier]) {\n                        mdOutput[pageIdentifier] += formattedContent;\n                    }\n                    mdOutput[pageIdentifier] += \"\\n\";\n                } else if (mdBlocks.type === \"callout\") {\n                // do nothing the callout block is already processed\n                } else {\n                    let mdstr = this.toMarkdownString(mdBlocks.children, pageIdentifier, nestingLevel + 1);\n                    mdOutput[pageIdentifier] = mdOutput[pageIdentifier] || \"\";\n                    if (pageIdentifier !== \"parent\" && mdstr[\"parent\"]) {\n                        mdOutput[pageIdentifier] += mdstr[\"parent\"];\n                    } else if (mdstr[pageIdentifier]) {\n                        mdOutput[pageIdentifier] += mdstr[pageIdentifier];\n                    }\n                }\n            }\n        });\n        return mdOutput;\n    }\n    /**\n     * Retrieves Notion Blocks based on ID and converts them to Markdown Blocks\n     * @param {string} id - notion page id (not database id)\n     * @param {number} totalPage - Retrieve block children request number, page_size Maximum = totalPage * 100 (Default=null)\n     * @returns {Promise<MdBlock[]>} - List of markdown blocks\n     */ async pageToMarkdown(id, totalPage = null) {\n        if (!this.notionClient) {\n            throw new Error(\"notion client is not provided, for more details check out https://github.com/souvikinator/notion-to-md\");\n        }\n        const blocks = await (0, notion_1.getBlockChildren)(this.notionClient, id, totalPage);\n        const parsedData = await this.blocksToMarkdown(blocks);\n        return parsedData;\n    }\n    /**\n     * Converts list of Notion Blocks to Markdown Blocks\n     * @param {ListBlockChildrenResponseResults | undefined} blocks - List of notion blocks\n     * @param {number} totalPage - Retrieve block children request number, page_size Maximum = totalPage * 100\n     * @param {MdBlock[]} mdBlocks - Array of markdown blocks\n     * @returns {Promise<MdBlock[]>} - Array of markdown blocks with their children\n     */ async blocksToMarkdown(blocks, totalPage = null, mdBlocks = []) {\n        var _a, _b;\n        if (!this.notionClient) {\n            throw new Error(\"notion client is not provided, for more details check out https://github.com/souvikinator/notion-to-md\");\n        }\n        if (!blocks) return mdBlocks;\n        for(let i = 0; i < blocks.length; i++){\n            let block = blocks[i];\n            if (// @ts-ignore\n            block.type === \"unsupported\" || // @ts-ignore\n            block.type === \"child_page\" && !this.config.parseChildPages) {\n                continue;\n            }\n            if (\"has_children\" in block && block.has_children) {\n                const block_id = block.type == \"synced_block\" && ((_b = (_a = block.synced_block) === null || _a === void 0 ? void 0 : _a.synced_from) === null || _b === void 0 ? void 0 : _b.block_id) ? block.synced_block.synced_from.block_id : block.id;\n                // Get children of this block.\n                let child_blocks = await (0, notion_1.getBlockChildren)(this.notionClient, block_id, totalPage);\n                // Push this block to mdBlocks.\n                mdBlocks.push({\n                    type: block.type,\n                    blockId: block.id,\n                    parent: await this.blockToMarkdown(block),\n                    children: []\n                });\n                // Recursively call blocksToMarkdown to get children of this block.\n                // check for custom transformer before parsing child\n                if (!(block.type in this.customTransformers) && !this.customTransformers[block.type]) {\n                    let l = mdBlocks.length;\n                    await this.blocksToMarkdown(child_blocks, totalPage, mdBlocks[l - 1].children);\n                }\n                continue;\n            }\n            let tmp = await this.blockToMarkdown(block);\n            mdBlocks.push({\n                // @ts-ignore\n                type: block.type,\n                blockId: block.id,\n                parent: tmp,\n                children: []\n            });\n        }\n        return mdBlocks;\n    }\n    /**\n     * Converts a Notion Block to a Markdown Block\n     * @param {ListBlockChildrenResponseResult} block - single notion block\n     * @returns {string} corresponding markdown string of the passed block\n     */ async blockToMarkdown(block) {\n        if (typeof block !== \"object\" || !(\"type\" in block)) return \"\";\n        let parsedData = \"\";\n        const { type } = block;\n        if (type in this.customTransformers && !!this.customTransformers[type]) {\n            const customTransformerValue = await this.customTransformers[type](block);\n            if (typeof customTransformerValue === \"string\") return customTransformerValue;\n        }\n        switch(type){\n            case \"image\":\n                {\n                    let blockContent = block.image;\n                    let image_title = \"image\";\n                    const image_caption_plain = blockContent.caption.map((item)=>item.plain_text).join(\"\");\n                    const image_type = blockContent.type;\n                    let link = \"\";\n                    if (image_type === \"external\") {\n                        link = blockContent.external.url;\n                    }\n                    if (image_type === \"file\") {\n                        link = blockContent.file.url;\n                    }\n                    // image caption with high priority\n                    if (image_caption_plain.trim().length > 0) {\n                        image_title = image_caption_plain;\n                    } else if (image_type === \"file\" || image_type === \"external\") {\n                        const matches = link.match(/[^\\/\\\\&\\?]+\\.\\w{3,4}(?=([\\?&].*$|$))/);\n                        image_title = matches ? matches[0] : image_title;\n                    }\n                    return await md.image(image_title, link, this.config.convertImagesToBase64);\n                }\n                break;\n            case \"divider\":\n                {\n                    return md.divider();\n                }\n            case \"equation\":\n                {\n                    return md.equation(block.equation.expression);\n                }\n            case \"video\":\n            case \"file\":\n            case \"pdf\":\n                {\n                    let blockContent;\n                    let title = type;\n                    if (type === \"video\") blockContent = block.video;\n                    if (type === \"file\") blockContent = block.file;\n                    if (type === \"pdf\") blockContent = block.pdf;\n                    const caption = blockContent === null || blockContent === void 0 ? void 0 : blockContent.caption.map((item)=>item.plain_text).join(\"\");\n                    if (blockContent) {\n                        const file_type = blockContent.type;\n                        let link = \"\";\n                        if (file_type === \"external\") link = blockContent.external.url;\n                        if (file_type === \"file\") link = blockContent.file.url;\n                        if (caption && caption.trim().length > 0) {\n                            title = caption;\n                        } else if (link) {\n                            const matches = link.match(/[^\\/\\\\&\\?]+\\.\\w{3,4}(?=([\\?&].*$|$))/);\n                            title = matches ? matches[0] : type;\n                        }\n                        return md.link(title, link);\n                    }\n                }\n                break;\n            case \"bookmark\":\n            case \"embed\":\n            case \"link_preview\":\n            case \"link_to_page\":\n                {\n                    let blockContent;\n                    let title = type;\n                    if (type === \"bookmark\") blockContent = block.bookmark;\n                    if (type === \"embed\") blockContent = block.embed;\n                    if (type === \"link_preview\") blockContent = block.link_preview;\n                    if (type === \"link_to_page\" && block.link_to_page.type === \"page_id\") {\n                        blockContent = {\n                            url: `https://www.notion.so/${block.link_to_page.page_id}`\n                        };\n                    }\n                    if (blockContent) return md.link(title, blockContent.url);\n                }\n                break;\n            case \"child_page\":\n                {\n                    if (!this.config.parseChildPages) return \"\";\n                    let pageTitle = block.child_page.title;\n                    if (this.config.separateChildPage) {\n                        return pageTitle;\n                    }\n                    return md.heading2(pageTitle);\n                }\n                break;\n            case \"child_database\":\n                {\n                    let pageTitle = block.child_database.title || `child_database`;\n                    return pageTitle;\n                }\n                break;\n            case \"table\":\n                {\n                    const { id, has_children } = block;\n                    let tableArr = [];\n                    if (has_children) {\n                        const tableRows = await (0, notion_1.getBlockChildren)(this.notionClient, id, 100);\n                        let rowsPromise = tableRows === null || tableRows === void 0 ? void 0 : tableRows.map(async (row)=>{\n                            const { type } = row;\n                            if (type !== \"table_row\") return;\n                            const cells = row.table_row[\"cells\"];\n                            /**\n                         * this is more like a hack since matching the type text was\n                         * difficult. So converting each cell to paragraph type to\n                         * reuse the blockToMarkdown function\n                         */ let cellStringPromise = cells.map(async (cell)=>await this.blockToMarkdown({\n                                    type: \"paragraph\",\n                                    paragraph: {\n                                        rich_text: cell\n                                    }\n                                }));\n                            const cellStringArr = await Promise.all(cellStringPromise);\n                            tableArr.push(cellStringArr);\n                        });\n                        await Promise.all(rowsPromise || []);\n                    }\n                    return md.table(tableArr);\n                }\n            // Rest of the types\n            // \"paragraph\"\n            // \"heading_1\"\n            // \"heading_2\"\n            // \"heading_3\"\n            // \"bulleted_list_item\"\n            // \"numbered_list_item\"\n            // \"quote\"\n            // \"to_do\"\n            // \"template\"\n            // \"synced_block\"\n            // \"child_page\"\n            // \"child_database\"\n            // \"code\"\n            // \"callout\"\n            // \"breadcrumb\"\n            // \"table_of_contents\"\n            // \"link_to_page\"\n            // \"audio\"\n            // \"unsupported\"\n            default:\n                {\n                    // In this case typescript is not able to index the types properly, hence ignoring the error\n                    // @ts-ignore\n                    let blockContent = block[type].text || block[type].rich_text || [];\n                    blockContent.map((content)=>{\n                        if (content.type === \"equation\") {\n                            parsedData += md.inlineEquation(content.equation.expression);\n                            return;\n                        }\n                        const annotations = content.annotations;\n                        let plain_text = content.plain_text;\n                        plain_text = this.annotatePlainText(plain_text, annotations);\n                        if (content[\"href\"]) plain_text = md.link(plain_text, content[\"href\"]);\n                        parsedData += plain_text;\n                    });\n                }\n        }\n        switch(type){\n            case \"code\":\n                {\n                    const codeContent = block.code.rich_text.map((t)=>t.plain_text).join(\"\\n\");\n                    const language = block.code.language || \"plaintext\";\n                    parsedData = md.codeBlock(codeContent, language);\n                }\n                break;\n            case \"heading_1\":\n                {\n                    parsedData = md.heading1(parsedData);\n                }\n                break;\n            case \"heading_2\":\n                {\n                    parsedData = md.heading2(parsedData);\n                }\n                break;\n            case \"heading_3\":\n                {\n                    parsedData = md.heading3(parsedData);\n                }\n                break;\n            case \"quote\":\n                {\n                    parsedData = md.quote(parsedData);\n                }\n                break;\n            case \"callout\":\n                {\n                    const { id, has_children } = block;\n                    let callout_string = \"\";\n                    if (!has_children) {\n                        return md.callout(parsedData, block[type].icon);\n                    }\n                    const callout_children_object = await (0, notion_1.getBlockChildren)(this.notionClient, id, 100);\n                    // // parse children blocks to md object\n                    const callout_children = await this.blocksToMarkdown(callout_children_object);\n                    callout_string += `${parsedData}\\n`;\n                    callout_children.map((child)=>{\n                        callout_string += `${child.parent}\\n\\n`;\n                    });\n                    parsedData = md.callout(callout_string.trim(), block[type].icon);\n                }\n                break;\n            case \"bulleted_list_item\":\n                {\n                    parsedData = md.bullet(parsedData);\n                }\n                break;\n            case \"numbered_list_item\":\n                {\n                    parsedData = md.bullet(parsedData, block.numbered_list_item.number);\n                }\n                break;\n            case \"to_do\":\n                {\n                    parsedData = md.todo(parsedData, block.to_do.checked);\n                }\n                break;\n        }\n        return parsedData;\n    }\n    /**\n     * Annoate text using provided annotations\n     * @param {string} text - String to be annotated\n     * @param {Annotations} annotations - Annotation object of a notion block\n     * @returns {string} - Annotated text\n     */ annotatePlainText(text, annotations) {\n        // if text is all spaces, don't annotate\n        if (text.match(/^\\s*$/)) return text;\n        const leadingSpaceMatch = text.match(/^(\\s*)/);\n        const trailingSpaceMatch = text.match(/(\\s*)$/);\n        const leading_space = leadingSpaceMatch ? leadingSpaceMatch[0] : \"\";\n        const trailing_space = trailingSpaceMatch ? trailingSpaceMatch[0] : \"\";\n        text = text.trim();\n        if (text !== \"\") {\n            if (annotations.code) text = md.inlineCode(text);\n            if (annotations.bold) text = md.bold(text);\n            if (annotations.italic) text = md.italic(text);\n            if (annotations.strikethrough) text = md.strikethrough(text);\n            if (annotations.underline) text = md.underline(text);\n        }\n        return leading_space + text + trailing_space;\n    }\n}\nexports.NotionToMarkdown = NotionToMarkdown; //# sourceMappingURL=notion-to-md.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbm90aW9uLXRvLW1kL2J1aWxkL25vdGlvbi10by1tZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLGtCQUFrQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGVBQWUsSUFBTUMsQ0FBQUEsT0FBT0MsTUFBTSxHQUFJLFNBQVNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDMUYsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0IsSUFBSUcsT0FBT1AsT0FBT1Esd0JBQXdCLENBQUNMLEdBQUdDO0lBQzlDLElBQUksQ0FBQ0csUUFBUyxVQUFTQSxPQUFPLENBQUNKLEVBQUVNLFVBQVUsR0FBR0YsS0FBS0csUUFBUSxJQUFJSCxLQUFLSSxZQUFZLEdBQUc7UUFDakZKLE9BQU87WUFBRUssWUFBWTtZQUFNQyxLQUFLO2dCQUFhLE9BQU9WLENBQUMsQ0FBQ0MsRUFBRTtZQUFFO1FBQUU7SUFDOUQ7SUFDQUosT0FBT2MsY0FBYyxDQUFDWixHQUFHRyxJQUFJRTtBQUNqQyxJQUFNLFNBQVNMLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDdEIsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0JGLENBQUMsQ0FBQ0csR0FBRyxHQUFHRixDQUFDLENBQUNDLEVBQUU7QUFDaEIsQ0FBQztBQUNELElBQUlXLHFCQUFxQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGtCQUFrQixJQUFNZixDQUFBQSxPQUFPQyxNQUFNLEdBQUksU0FBU0MsQ0FBQyxFQUFFYyxDQUFDO0lBQ3pGaEIsT0FBT2MsY0FBYyxDQUFDWixHQUFHLFdBQVc7UUFBRVUsWUFBWTtRQUFNSyxPQUFPRDtJQUFFO0FBQ3JFLElBQUssU0FBU2QsQ0FBQyxFQUFFYyxDQUFDO0lBQ2RkLENBQUMsQ0FBQyxVQUFVLEdBQUdjO0FBQ25CO0FBQ0EsSUFBSUUsZUFBZSxDQUFDLE1BQUcsS0FBSyxPQUFHLEVB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RztRQUNqRSxNQUFNRyxpQkFBaUJGLHFCQUFxQkEsa0JBQWtCLENBQUMsRUFBRSxHQUFHO1FBQ3BFMUIsT0FBT0EsS0FBS3BFLElBQUk7UUFDaEIsSUFBSW9FLFNBQVMsSUFBSTtZQUNiLElBQUlHLFlBQVlHLElBQUksRUFDaEJOLE9BQU94RyxHQUFHcUksVUFBVSxDQUFDN0I7WUFDekIsSUFBSUcsWUFBWTJCLElBQUksRUFDaEI5QixPQUFPeEcsR0FBR3NJLElBQUksQ0FBQzlCO1lBQ25CLElBQUlHLFlBQVk0QixNQUFNLEVBQ2xCL0IsT0FBT3hHLEdBQUd1SSxNQUFNLENBQUMvQjtZQUNyQixJQUFJRyxZQUFZNkIsYUFBYSxFQUN6QmhDLE9BQU94RyxHQUFHd0ksYUFBYSxDQUFDaEM7WUFDNUIsSUFBSUcsWUFBWThCLFNBQVMsRUFDckJqQyxPQUFPeEcsR0FBR3lJLFNBQVMsQ0FBQ2pDO1FBQzVCO1FBQ0EsT0FBTzJCLGdCQUFnQjNCLE9BQU80QjtJQUNsQztBQUNKO0FBQ0F0SSx3QkFBd0IsR0FBR0Msa0JBQzNCLHdDQUF3QyIsInNvdXJjZXMiOlsid2VicGFjazovL2NhdGhlcmluZS1wb3J0Zm9saW8vLi9ub2RlX21vZHVsZXMvbm90aW9uLXRvLW1kL2J1aWxkL25vdGlvbi10by1tZC5qcz9kNWJmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk5vdGlvblRvTWFya2Rvd24gPSB2b2lkIDA7XG5jb25zdCBtZCA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi91dGlscy9tZFwiKSk7XG5jb25zdCBub3Rpb25fMSA9IHJlcXVpcmUoXCIuL3V0aWxzL25vdGlvblwiKTtcbi8qKlxuICogQ29udmVydHMgYSBOb3Rpb24gcGFnZSB0byBNYXJrZG93bi5cbiAqL1xuY2xhc3MgTm90aW9uVG9NYXJrZG93biB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLm5vdGlvbkNsaWVudCA9IG9wdGlvbnMubm90aW9uQ2xpZW50O1xuICAgICAgICBjb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAgICAgICAgICAgc2VwYXJhdGVDaGlsZFBhZ2U6IGZhbHNlLFxuICAgICAgICAgICAgY29udmVydEltYWdlc1RvQmFzZTY0OiBmYWxzZSxcbiAgICAgICAgICAgIHBhcnNlQ2hpbGRQYWdlczogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB7IC4uLmRlZmF1bHRDb25maWcsIC4uLm9wdGlvbnMuY29uZmlnIH07XG4gICAgICAgIHRoaXMuY3VzdG9tVHJhbnNmb3JtZXJzID0ge307XG4gICAgfVxuICAgIHNldEN1c3RvbVRyYW5zZm9ybWVyKHR5cGUsIHRyYW5zZm9ybWVyKSB7XG4gICAgICAgIHRoaXMuY3VzdG9tVHJhbnNmb3JtZXJzW3R5cGVdID0gdHJhbnNmb3JtZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBNYXJrZG93biBCbG9ja3MgdG8gc3RyaW5nXG4gICAgICogQHBhcmFtIHtNZEJsb2NrW119IG1kQmxvY2tzIC0gQXJyYXkgb2YgbWFya2Rvd24gYmxvY2tzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG5lc3RpbmdMZXZlbCAtIERlZmluZXMgbWF4IGRlcHRoIG9mIG5lc3RpbmdcbiAgICAgKiBAcmV0dXJucyB7TWRTdHJpbmdPYmplY3R9IC0gUmV0dXJucyBtYXJrZG93biBzdHJpbmcgd2l0aCBjaGlsZCBwYWdlcyBzZXBhcmF0ZWRcbiAgICAgKi9cbiAgICB0b01hcmtkb3duU3RyaW5nKG1kQmxvY2tzID0gW10sIHBhZ2VJZGVudGlmaWVyID0gXCJwYXJlbnRcIiwgbmVzdGluZ0xldmVsID0gMCkge1xuICAgICAgICBsZXQgbWRPdXRwdXQgPSB7fTtcbiAgICAgICAgbWRCbG9ja3MuZm9yRWFjaCgobWRCbG9ja3MpID0+IHtcbiAgICAgICAgICAgIC8vIE5PVEU6IHRvZ2dsZSBpbiB0aGUgY2hpbGQgYmxvY2tzIGxvZ2ljXG4gICAgICAgICAgICAvLyBhZGRpbmcgYSB0b2dnbGUgY2hlY2sgcHJldmVudHMgZHVwbGljYXRlXG4gICAgICAgICAgICAvLyByZW5kZXJpbmcgb2YgdG9nZ2xlIHRpdGxlXG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAvLyBwcm9jZXNzIHBhcmVudCBibG9ja3NcbiAgICAgICAgICAgIGlmIChtZEJsb2Nrcy5wYXJlbnQgJiZcbiAgICAgICAgICAgICAgICBtZEJsb2Nrcy50eXBlICE9PSBcInRvZ2dsZVwiICYmXG4gICAgICAgICAgICAgICAgbWRCbG9ja3MudHlwZSAhPT0gXCJjaGlsZF9wYWdlXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWRCbG9ja3MudHlwZSAhPT0gXCJ0b19kb1wiICYmXG4gICAgICAgICAgICAgICAgICAgIG1kQmxvY2tzLnR5cGUgIT09IFwiYnVsbGV0ZWRfbGlzdF9pdGVtXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgbWRCbG9ja3MudHlwZSAhPT0gXCJudW1iZXJlZF9saXN0X2l0ZW1cIiAmJlxuICAgICAgICAgICAgICAgICAgICBtZEJsb2Nrcy50eXBlICE9PSBcInF1b3RlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBpZiBrZXkgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgICAgICAgICBtZE91dHB1dFtwYWdlSWRlbnRpZmllcl0gPSBtZE91dHB1dFtwYWdlSWRlbnRpZmllcl0gfHwgXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGV4dHJhIGxpbmUgYnJlYWtzIG5vbiBsaXN0IGJsb2Nrc1xuICAgICAgICAgICAgICAgICAgICBtZE91dHB1dFtwYWdlSWRlbnRpZmllcl0gKz0gYFxcbiR7bWQuYWRkVGFiU3BhY2UobWRCbG9ja3MucGFyZW50LCBuZXN0aW5nTGV2ZWwpfVxcblxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIGlmIGtleSBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgICAgICAgICAgIG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSA9IG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBtZE91dHB1dFtwYWdlSWRlbnRpZmllcl0gKz0gYCR7bWQuYWRkVGFiU3BhY2UobWRCbG9ja3MucGFyZW50LCBuZXN0aW5nTGV2ZWwpfVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcHJvY2VzcyBjaGlsZCBibG9ja3NcbiAgICAgICAgICAgIGlmIChtZEJsb2Nrcy5jaGlsZHJlbiAmJiBtZEJsb2Nrcy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1kQmxvY2tzLnR5cGUgPT09IFwic3luY2VkX2Jsb2NrXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgbWRCbG9ja3MudHlwZSA9PT0gXCJjb2x1bW5fbGlzdFwiIHx8XG4gICAgICAgICAgICAgICAgICAgIG1kQmxvY2tzLnR5cGUgPT09IFwiY29sdW1uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1kc3RyID0gdGhpcy50b01hcmtkb3duU3RyaW5nKG1kQmxvY2tzLmNoaWxkcmVuLCBwYWdlSWRlbnRpZmllcik7XG4gICAgICAgICAgICAgICAgICAgIG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSA9IG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtZHN0cikuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWRPdXRwdXRba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kT3V0cHV0W2tleV0gKz0gbWRzdHJba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kT3V0cHV0W2tleV0gPSBtZHN0cltrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWRCbG9ja3MudHlwZSA9PT0gXCJjaGlsZF9wYWdlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRQYWdlVGl0bGUgPSBtZEJsb2Nrcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtZHN0ciA9IHRoaXMudG9NYXJrZG93blN0cmluZyhtZEJsb2Nrcy5jaGlsZHJlbiwgY2hpbGRQYWdlVGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcuc2VwYXJhdGVDaGlsZFBhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1kT3V0cHV0ID0geyAuLi5tZE91dHB1dCwgLi4ubWRzdHIgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSA9IG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1kc3RyW2NoaWxkUGFnZVRpdGxlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoaWxkIHBhZ2UgaGVhZGluZyBmb2xsb3dlZCBieSBjaGlsZCBwYWdlIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZE91dHB1dFtwYWdlSWRlbnRpZmllcl0gKz1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxcbiR7Y2hpbGRQYWdlVGl0bGV9XFxuJHttZHN0cltjaGlsZFBhZ2VUaXRsZV19YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtZEJsb2Nrcy50eXBlID09PSBcInRvZ2dsZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnZlcnQgY2hpbGRyZW4gbWQgb2JqZWN0IHRvIG1kIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGVfY2hpbGRyZW5fbWRfc3RyaW5nID0gdGhpcy50b01hcmtkb3duU3RyaW5nKG1kQmxvY2tzLmNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgbWRPdXRwdXRbcGFnZUlkZW50aWZpZXJdID0gbWRPdXRwdXRbcGFnZUlkZW50aWZpZXJdIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSArPSBtZC50b2dnbGUobWRCbG9ja3MucGFyZW50LCB0b2dnbGVfY2hpbGRyZW5fbWRfc3RyaW5nW1wicGFyZW50XCJdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWRCbG9ja3MudHlwZSA9PT0gXCJxdW90ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtZHN0ciA9IHRoaXMudG9NYXJrZG93blN0cmluZyhtZEJsb2Nrcy5jaGlsZHJlbiwgcGFnZUlkZW50aWZpZXIsIG5lc3RpbmdMZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZENvbnRlbnQgPSAoKF9hID0gbWRzdHIucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBtZHN0cltwYWdlSWRlbnRpZmllcl0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGxpbmUpID0+IChsaW5lLnRyaW0oKSA/IGA+ICR7bGluZX1gIDogXCI+XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSA9IG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFnZUlkZW50aWZpZXIgIT09IFwicGFyZW50XCIgJiYgbWRzdHJbXCJwYXJlbnRcIl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1kT3V0cHV0W3BhZ2VJZGVudGlmaWVyXSArPSBmb3JtYXR0ZWRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1kc3RyW3BhZ2VJZGVudGlmaWVyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWRPdXRwdXRbcGFnZUlkZW50aWZpZXJdICs9IGZvcm1hdHRlZENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWRPdXRwdXRbcGFnZUlkZW50aWZpZXJdICs9IFwiXFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1kQmxvY2tzLnR5cGUgPT09IFwiY2FsbG91dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcgdGhlIGNhbGxvdXQgYmxvY2sgaXMgYWxyZWFkeSBwcm9jZXNzZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtZHN0ciA9IHRoaXMudG9NYXJrZG93blN0cmluZyhtZEJsb2Nrcy5jaGlsZHJlbiwgcGFnZUlkZW50aWZpZXIsIG5lc3RpbmdMZXZlbCArIDEpO1xuICAgICAgICAgICAgICAgICAgICBtZE91dHB1dFtwYWdlSWRlbnRpZmllcl0gPSBtZE91dHB1dFtwYWdlSWRlbnRpZmllcl0gfHwgXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VJZGVudGlmaWVyICE9PSBcInBhcmVudFwiICYmIG1kc3RyW1wicGFyZW50XCJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZE91dHB1dFtwYWdlSWRlbnRpZmllcl0gKz0gbWRzdHJbXCJwYXJlbnRcIl07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWRzdHJbcGFnZUlkZW50aWZpZXJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZE91dHB1dFtwYWdlSWRlbnRpZmllcl0gKz0gbWRzdHJbcGFnZUlkZW50aWZpZXJdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1kT3V0cHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgTm90aW9uIEJsb2NrcyBiYXNlZCBvbiBJRCBhbmQgY29udmVydHMgdGhlbSB0byBNYXJrZG93biBCbG9ja3NcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBub3Rpb24gcGFnZSBpZCAobm90IGRhdGFiYXNlIGlkKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b3RhbFBhZ2UgLSBSZXRyaWV2ZSBibG9jayBjaGlsZHJlbiByZXF1ZXN0IG51bWJlciwgcGFnZV9zaXplIE1heGltdW0gPSB0b3RhbFBhZ2UgKiAxMDAgKERlZmF1bHQ9bnVsbClcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxNZEJsb2NrW10+fSAtIExpc3Qgb2YgbWFya2Rvd24gYmxvY2tzXG4gICAgICovXG4gICAgYXN5bmMgcGFnZVRvTWFya2Rvd24oaWQsIHRvdGFsUGFnZSA9IG51bGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLm5vdGlvbkNsaWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90aW9uIGNsaWVudCBpcyBub3QgcHJvdmlkZWQsIGZvciBtb3JlIGRldGFpbHMgY2hlY2sgb3V0IGh0dHBzOi8vZ2l0aHViLmNvbS9zb3V2aWtpbmF0b3Ivbm90aW9uLXRvLW1kXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsb2NrcyA9IGF3YWl0ICgwLCBub3Rpb25fMS5nZXRCbG9ja0NoaWxkcmVuKSh0aGlzLm5vdGlvbkNsaWVudCwgaWQsIHRvdGFsUGFnZSk7XG4gICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBhd2FpdCB0aGlzLmJsb2Nrc1RvTWFya2Rvd24oYmxvY2tzKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZERhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGxpc3Qgb2YgTm90aW9uIEJsb2NrcyB0byBNYXJrZG93biBCbG9ja3NcbiAgICAgKiBAcGFyYW0ge0xpc3RCbG9ja0NoaWxkcmVuUmVzcG9uc2VSZXN1bHRzIHwgdW5kZWZpbmVkfSBibG9ja3MgLSBMaXN0IG9mIG5vdGlvbiBibG9ja3NcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG90YWxQYWdlIC0gUmV0cmlldmUgYmxvY2sgY2hpbGRyZW4gcmVxdWVzdCBudW1iZXIsIHBhZ2Vfc2l6ZSBNYXhpbXVtID0gdG90YWxQYWdlICogMTAwXG4gICAgICogQHBhcmFtIHtNZEJsb2NrW119IG1kQmxvY2tzIC0gQXJyYXkgb2YgbWFya2Rvd24gYmxvY2tzXG4gICAgICogQHJldHVybnMge1Byb21pc2U8TWRCbG9ja1tdPn0gLSBBcnJheSBvZiBtYXJrZG93biBibG9ja3Mgd2l0aCB0aGVpciBjaGlsZHJlblxuICAgICAqL1xuICAgIGFzeW5jIGJsb2Nrc1RvTWFya2Rvd24oYmxvY2tzLCB0b3RhbFBhZ2UgPSBudWxsLCBtZEJsb2NrcyA9IFtdKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGlmICghdGhpcy5ub3Rpb25DbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdGlvbiBjbGllbnQgaXMgbm90IHByb3ZpZGVkLCBmb3IgbW9yZSBkZXRhaWxzIGNoZWNrIG91dCBodHRwczovL2dpdGh1Yi5jb20vc291dmlraW5hdG9yL25vdGlvbi10by1tZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWJsb2NrcylcbiAgICAgICAgICAgIHJldHVybiBtZEJsb2NrcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9ja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBibG9jayA9IGJsb2Nrc1tpXTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGJsb2NrLnR5cGUgPT09IFwidW5zdXBwb3J0ZWRcIiB8fFxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAoYmxvY2sudHlwZSA9PT0gXCJjaGlsZF9wYWdlXCIgJiYgIXRoaXMuY29uZmlnLnBhcnNlQ2hpbGRQYWdlcykpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcImhhc19jaGlsZHJlblwiIGluIGJsb2NrICYmIGJsb2NrLmhhc19jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrX2lkID0gYmxvY2sudHlwZSA9PSBcInN5bmNlZF9ibG9ja1wiICYmXG4gICAgICAgICAgICAgICAgICAgICgoX2IgPSAoX2EgPSBibG9jay5zeW5jZWRfYmxvY2spID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zeW5jZWRfZnJvbSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmJsb2NrX2lkKVxuICAgICAgICAgICAgICAgICAgICA/IGJsb2NrLnN5bmNlZF9ibG9jay5zeW5jZWRfZnJvbS5ibG9ja19pZFxuICAgICAgICAgICAgICAgICAgICA6IGJsb2NrLmlkO1xuICAgICAgICAgICAgICAgIC8vIEdldCBjaGlsZHJlbiBvZiB0aGlzIGJsb2NrLlxuICAgICAgICAgICAgICAgIGxldCBjaGlsZF9ibG9ja3MgPSBhd2FpdCAoMCwgbm90aW9uXzEuZ2V0QmxvY2tDaGlsZHJlbikodGhpcy5ub3Rpb25DbGllbnQsIGJsb2NrX2lkLCB0b3RhbFBhZ2UpO1xuICAgICAgICAgICAgICAgIC8vIFB1c2ggdGhpcyBibG9jayB0byBtZEJsb2Nrcy5cbiAgICAgICAgICAgICAgICBtZEJsb2Nrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogYmxvY2sudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tJZDogYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogYXdhaXQgdGhpcy5ibG9ja1RvTWFya2Rvd24oYmxvY2spLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgY2FsbCBibG9ja3NUb01hcmtkb3duIHRvIGdldCBjaGlsZHJlbiBvZiB0aGlzIGJsb2NrLlxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciBjdXN0b20gdHJhbnNmb3JtZXIgYmVmb3JlIHBhcnNpbmcgY2hpbGRcbiAgICAgICAgICAgICAgICBpZiAoIShibG9jay50eXBlIGluIHRoaXMuY3VzdG9tVHJhbnNmb3JtZXJzKSAmJlxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5jdXN0b21UcmFuc2Zvcm1lcnNbYmxvY2sudHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGwgPSBtZEJsb2Nrcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmxvY2tzVG9NYXJrZG93bihjaGlsZF9ibG9ja3MsIHRvdGFsUGFnZSwgbWRCbG9ja3NbbCAtIDFdLmNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdG1wID0gYXdhaXQgdGhpcy5ibG9ja1RvTWFya2Rvd24oYmxvY2spO1xuICAgICAgICAgICAgbWRCbG9ja3MucHVzaCh7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHR5cGU6IGJsb2NrLnR5cGUsXG4gICAgICAgICAgICAgICAgYmxvY2tJZDogYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgcGFyZW50OiB0bXAsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1kQmxvY2tzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIE5vdGlvbiBCbG9jayB0byBhIE1hcmtkb3duIEJsb2NrXG4gICAgICogQHBhcmFtIHtMaXN0QmxvY2tDaGlsZHJlblJlc3BvbnNlUmVzdWx0fSBibG9jayAtIHNpbmdsZSBub3Rpb24gYmxvY2tcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb3JyZXNwb25kaW5nIG1hcmtkb3duIHN0cmluZyBvZiB0aGUgcGFzc2VkIGJsb2NrXG4gICAgICovXG4gICAgYXN5bmMgYmxvY2tUb01hcmtkb3duKGJsb2NrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYmxvY2sgIT09IFwib2JqZWN0XCIgfHwgIShcInR5cGVcIiBpbiBibG9jaykpXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgbGV0IHBhcnNlZERhdGEgPSBcIlwiO1xuICAgICAgICBjb25zdCB7IHR5cGUgfSA9IGJsb2NrO1xuICAgICAgICBpZiAodHlwZSBpbiB0aGlzLmN1c3RvbVRyYW5zZm9ybWVycyAmJiAhIXRoaXMuY3VzdG9tVHJhbnNmb3JtZXJzW3R5cGVdKSB7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21UcmFuc2Zvcm1lclZhbHVlID0gYXdhaXQgdGhpcy5jdXN0b21UcmFuc2Zvcm1lcnNbdHlwZV0oYmxvY2spO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21UcmFuc2Zvcm1lclZhbHVlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21UcmFuc2Zvcm1lclZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcImltYWdlXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmxvY2tDb250ZW50ID0gYmxvY2suaW1hZ2U7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZV90aXRsZSA9IFwiaW1hZ2VcIjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VfY2FwdGlvbl9wbGFpbiA9IGJsb2NrQ29udGVudC5jYXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLnBsYWluX3RleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VfdHlwZSA9IGJsb2NrQ29udGVudC50eXBlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGluayA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZV90eXBlID09PSBcImV4dGVybmFsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBibG9ja0NvbnRlbnQuZXh0ZXJuYWwudXJsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZV90eXBlID09PSBcImZpbGVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IGJsb2NrQ29udGVudC5maWxlLnVybDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBpbWFnZSBjYXB0aW9uIHdpdGggaGlnaCBwcmlvcml0eVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VfY2FwdGlvbl9wbGFpbi50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfdGl0bGUgPSBpbWFnZV9jYXB0aW9uX3BsYWluO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGltYWdlX3R5cGUgPT09IFwiZmlsZVwiIHx8IGltYWdlX3R5cGUgPT09IFwiZXh0ZXJuYWxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGxpbmsubWF0Y2goL1teXFwvXFxcXCZcXD9dK1xcLlxcd3szLDR9KD89KFtcXD8mXS4qJHwkKSkvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3RpdGxlID0gbWF0Y2hlcyA/IG1hdGNoZXNbMF0gOiBpbWFnZV90aXRsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgbWQuaW1hZ2UoaW1hZ2VfdGl0bGUsIGxpbmssIHRoaXMuY29uZmlnLmNvbnZlcnRJbWFnZXNUb0Jhc2U2NCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImRpdmlkZXJcIjoge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZC5kaXZpZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiZXF1YXRpb25cIjoge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZC5lcXVhdGlvbihibG9jay5lcXVhdGlvbi5leHByZXNzaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJ2aWRlb1wiOlxuICAgICAgICAgICAgY2FzZSBcImZpbGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJwZGZcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9ja0NvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcInZpZGVvXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja0NvbnRlbnQgPSBibG9jay52aWRlbztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiZmlsZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tDb250ZW50ID0gYmxvY2suZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwicGRmXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja0NvbnRlbnQgPSBibG9jay5wZGY7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcHRpb24gPSBibG9ja0NvbnRlbnQgPT09IG51bGwgfHwgYmxvY2tDb250ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBibG9ja0NvbnRlbnQuY2FwdGlvbi5tYXAoKGl0ZW0pID0+IGl0ZW0ucGxhaW5fdGV4dCkuam9pbihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZV90eXBlID0gYmxvY2tDb250ZW50LnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGluayA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZV90eXBlID09PSBcImV4dGVybmFsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IGJsb2NrQ29udGVudC5leHRlcm5hbC51cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZV90eXBlID09PSBcImZpbGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rID0gYmxvY2tDb250ZW50LmZpbGUudXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhcHRpb24gJiYgY2FwdGlvbi50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlID0gY2FwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gbGluay5tYXRjaCgvW15cXC9cXFxcJlxcP10rXFwuXFx3ezMsNH0oPz0oW1xcPyZdLiokfCQpKS8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlID0gbWF0Y2hlcyA/IG1hdGNoZXNbMF0gOiB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1kLmxpbmsodGl0bGUsIGxpbmspO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImJvb2ttYXJrXCI6XG4gICAgICAgICAgICBjYXNlIFwiZW1iZWRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJsaW5rX3ByZXZpZXdcIjpcbiAgICAgICAgICAgIGNhc2UgXCJsaW5rX3RvX3BhZ2VcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9ja0NvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcImJvb2ttYXJrXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja0NvbnRlbnQgPSBibG9jay5ib29rbWFyaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiZW1iZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrQ29udGVudCA9IGJsb2NrLmVtYmVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJsaW5rX3ByZXZpZXdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrQ29udGVudCA9IGJsb2NrLmxpbmtfcHJldmlldztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwibGlua190b19wYWdlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmxpbmtfdG9fcGFnZS50eXBlID09PSBcInBhZ2VfaWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tDb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogYGh0dHBzOi8vd3d3Lm5vdGlvbi5zby8ke2Jsb2NrLmxpbmtfdG9fcGFnZS5wYWdlX2lkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9ja0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWQubGluayh0aXRsZSwgYmxvY2tDb250ZW50LnVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNoaWxkX3BhZ2VcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb25maWcucGFyc2VDaGlsZFBhZ2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwYWdlVGl0bGUgPSBibG9jay5jaGlsZF9wYWdlLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcuc2VwYXJhdGVDaGlsZFBhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYWdlVGl0bGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1kLmhlYWRpbmcyKHBhZ2VUaXRsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNoaWxkX2RhdGFiYXNlXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFnZVRpdGxlID0gYmxvY2suY2hpbGRfZGF0YWJhc2UudGl0bGUgfHwgYGNoaWxkX2RhdGFiYXNlYDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2VUaXRsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidGFibGVcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgaWQsIGhhc19jaGlsZHJlbiB9ID0gYmxvY2s7XG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlQXJyID0gW107XG4gICAgICAgICAgICAgICAgaWYgKGhhc19jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZVJvd3MgPSBhd2FpdCAoMCwgbm90aW9uXzEuZ2V0QmxvY2tDaGlsZHJlbikodGhpcy5ub3Rpb25DbGllbnQsIGlkLCAxMDApO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcm93c1Byb21pc2UgPSB0YWJsZVJvd3MgPT09IG51bGwgfHwgdGFibGVSb3dzID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0YWJsZVJvd3MubWFwKGFzeW5jIChyb3cpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gcm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgIT09ICd0YWJsZV9yb3cnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnRhYmxlX3Jvd1tcImNlbGxzXCJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiB0aGlzIGlzIG1vcmUgbGlrZSBhIGhhY2sgc2luY2UgbWF0Y2hpbmcgdGhlIHR5cGUgdGV4dCB3YXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGRpZmZpY3VsdC4gU28gY29udmVydGluZyBlYWNoIGNlbGwgdG8gcGFyYWdyYXBoIHR5cGUgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAqIHJldXNlIHRoZSBibG9ja1RvTWFya2Rvd24gZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNlbGxTdHJpbmdQcm9taXNlID0gY2VsbHMubWFwKGFzeW5jIChjZWxsKSA9PiBhd2FpdCB0aGlzLmJsb2NrVG9NYXJrZG93bih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhZ3JhcGg6IHsgcmljaF90ZXh0OiBjZWxsIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsU3RyaW5nQXJyID0gYXdhaXQgUHJvbWlzZS5hbGwoY2VsbFN0cmluZ1Byb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVBcnIucHVzaChjZWxsU3RyaW5nQXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJvd3NQcm9taXNlIHx8IFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1kLnRhYmxlKHRhYmxlQXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlc3Qgb2YgdGhlIHR5cGVzXG4gICAgICAgICAgICAvLyBcInBhcmFncmFwaFwiXG4gICAgICAgICAgICAvLyBcImhlYWRpbmdfMVwiXG4gICAgICAgICAgICAvLyBcImhlYWRpbmdfMlwiXG4gICAgICAgICAgICAvLyBcImhlYWRpbmdfM1wiXG4gICAgICAgICAgICAvLyBcImJ1bGxldGVkX2xpc3RfaXRlbVwiXG4gICAgICAgICAgICAvLyBcIm51bWJlcmVkX2xpc3RfaXRlbVwiXG4gICAgICAgICAgICAvLyBcInF1b3RlXCJcbiAgICAgICAgICAgIC8vIFwidG9fZG9cIlxuICAgICAgICAgICAgLy8gXCJ0ZW1wbGF0ZVwiXG4gICAgICAgICAgICAvLyBcInN5bmNlZF9ibG9ja1wiXG4gICAgICAgICAgICAvLyBcImNoaWxkX3BhZ2VcIlxuICAgICAgICAgICAgLy8gXCJjaGlsZF9kYXRhYmFzZVwiXG4gICAgICAgICAgICAvLyBcImNvZGVcIlxuICAgICAgICAgICAgLy8gXCJjYWxsb3V0XCJcbiAgICAgICAgICAgIC8vIFwiYnJlYWRjcnVtYlwiXG4gICAgICAgICAgICAvLyBcInRhYmxlX29mX2NvbnRlbnRzXCJcbiAgICAgICAgICAgIC8vIFwibGlua190b19wYWdlXCJcbiAgICAgICAgICAgIC8vIFwiYXVkaW9cIlxuICAgICAgICAgICAgLy8gXCJ1bnN1cHBvcnRlZFwiXG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIHR5cGVzY3JpcHQgaXMgbm90IGFibGUgdG8gaW5kZXggdGhlIHR5cGVzIHByb3Blcmx5LCBoZW5jZSBpZ25vcmluZyB0aGUgZXJyb3JcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgbGV0IGJsb2NrQ29udGVudCA9IGJsb2NrW3R5cGVdLnRleHQgfHwgYmxvY2tbdHlwZV0ucmljaF90ZXh0IHx8IFtdO1xuICAgICAgICAgICAgICAgIGJsb2NrQ29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gXCJlcXVhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWREYXRhICs9IG1kLmlubGluZUVxdWF0aW9uKGNvbnRlbnQuZXF1YXRpb24uZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvbnMgPSBjb250ZW50LmFubm90YXRpb25zO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGxhaW5fdGV4dCA9IGNvbnRlbnQucGxhaW5fdGV4dDtcbiAgICAgICAgICAgICAgICAgICAgcGxhaW5fdGV4dCA9IHRoaXMuYW5ub3RhdGVQbGFpblRleHQocGxhaW5fdGV4dCwgYW5ub3RhdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudFtcImhyZWZcIl0pXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFpbl90ZXh0ID0gbWQubGluayhwbGFpbl90ZXh0LCBjb250ZW50W1wiaHJlZlwiXSk7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGEgKz0gcGxhaW5fdGV4dDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJjb2RlXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2RlQ29udGVudCA9IGJsb2NrLmNvZGUucmljaF90ZXh0Lm1hcCgodCkgPT4gdC5wbGFpbl90ZXh0KS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYW5ndWFnZSA9IGJsb2NrLmNvZGUubGFuZ3VhZ2UgfHwgXCJwbGFpbnRleHRcIjtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YSA9IG1kLmNvZGVCbG9jayhjb2RlQ29udGVudCwgbGFuZ3VhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJoZWFkaW5nXzFcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGEgPSBtZC5oZWFkaW5nMShwYXJzZWREYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiaGVhZGluZ18yXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWREYXRhID0gbWQuaGVhZGluZzIocGFyc2VkRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImhlYWRpbmdfM1wiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YSA9IG1kLmhlYWRpbmczKHBhcnNlZERhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJxdW90ZVwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YSA9IG1kLnF1b3RlKHBhcnNlZERhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjYWxsb3V0XCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGlkLCBoYXNfY2hpbGRyZW4gfSA9IGJsb2NrO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbG91dF9zdHJpbmcgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc19jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1kLmNhbGxvdXQocGFyc2VkRGF0YSwgYmxvY2tbdHlwZV0uaWNvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbG91dF9jaGlsZHJlbl9vYmplY3QgPSBhd2FpdCAoMCwgbm90aW9uXzEuZ2V0QmxvY2tDaGlsZHJlbikodGhpcy5ub3Rpb25DbGllbnQsIGlkLCAxMDApO1xuICAgICAgICAgICAgICAgICAgICAvLyAvLyBwYXJzZSBjaGlsZHJlbiBibG9ja3MgdG8gbWQgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxvdXRfY2hpbGRyZW4gPSBhd2FpdCB0aGlzLmJsb2Nrc1RvTWFya2Rvd24oY2FsbG91dF9jaGlsZHJlbl9vYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsb3V0X3N0cmluZyArPSBgJHtwYXJzZWREYXRhfVxcbmA7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxvdXRfY2hpbGRyZW4ubWFwKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbG91dF9zdHJpbmcgKz0gYCR7Y2hpbGQucGFyZW50fVxcblxcbmA7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWREYXRhID0gbWQuY2FsbG91dChjYWxsb3V0X3N0cmluZy50cmltKCksIGJsb2NrW3R5cGVdLmljb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJidWxsZXRlZF9saXN0X2l0ZW1cIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGEgPSBtZC5idWxsZXQocGFyc2VkRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm51bWJlcmVkX2xpc3RfaXRlbVwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YSA9IG1kLmJ1bGxldChwYXJzZWREYXRhLCBibG9jay5udW1iZXJlZF9saXN0X2l0ZW0ubnVtYmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidG9fZG9cIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGEgPSBtZC50b2RvKHBhcnNlZERhdGEsIGJsb2NrLnRvX2RvLmNoZWNrZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkRGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW5ub2F0ZSB0ZXh0IHVzaW5nIHByb3ZpZGVkIGFubm90YXRpb25zXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBTdHJpbmcgdG8gYmUgYW5ub3RhdGVkXG4gICAgICogQHBhcmFtIHtBbm5vdGF0aW9uc30gYW5ub3RhdGlvbnMgLSBBbm5vdGF0aW9uIG9iamVjdCBvZiBhIG5vdGlvbiBibG9ja1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IC0gQW5ub3RhdGVkIHRleHRcbiAgICAgKi9cbiAgICBhbm5vdGF0ZVBsYWluVGV4dCh0ZXh0LCBhbm5vdGF0aW9ucykge1xuICAgICAgICAvLyBpZiB0ZXh0IGlzIGFsbCBzcGFjZXMsIGRvbid0IGFubm90YXRlXG4gICAgICAgIGlmICh0ZXh0Lm1hdGNoKC9eXFxzKiQvKSlcbiAgICAgICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgICBjb25zdCBsZWFkaW5nU3BhY2VNYXRjaCA9IHRleHQubWF0Y2goL14oXFxzKikvKTtcbiAgICAgICAgY29uc3QgdHJhaWxpbmdTcGFjZU1hdGNoID0gdGV4dC5tYXRjaCgvKFxccyopJC8pO1xuICAgICAgICBjb25zdCBsZWFkaW5nX3NwYWNlID0gbGVhZGluZ1NwYWNlTWF0Y2ggPyBsZWFkaW5nU3BhY2VNYXRjaFswXSA6IFwiXCI7XG4gICAgICAgIGNvbnN0IHRyYWlsaW5nX3NwYWNlID0gdHJhaWxpbmdTcGFjZU1hdGNoID8gdHJhaWxpbmdTcGFjZU1hdGNoWzBdIDogXCJcIjtcbiAgICAgICAgdGV4dCA9IHRleHQudHJpbSgpO1xuICAgICAgICBpZiAodGV4dCAhPT0gXCJcIikge1xuICAgICAgICAgICAgaWYgKGFubm90YXRpb25zLmNvZGUpXG4gICAgICAgICAgICAgICAgdGV4dCA9IG1kLmlubGluZUNvZGUodGV4dCk7XG4gICAgICAgICAgICBpZiAoYW5ub3RhdGlvbnMuYm9sZClcbiAgICAgICAgICAgICAgICB0ZXh0ID0gbWQuYm9sZCh0ZXh0KTtcbiAgICAgICAgICAgIGlmIChhbm5vdGF0aW9ucy5pdGFsaWMpXG4gICAgICAgICAgICAgICAgdGV4dCA9IG1kLml0YWxpYyh0ZXh0KTtcbiAgICAgICAgICAgIGlmIChhbm5vdGF0aW9ucy5zdHJpa2V0aHJvdWdoKVxuICAgICAgICAgICAgICAgIHRleHQgPSBtZC5zdHJpa2V0aHJvdWdoKHRleHQpO1xuICAgICAgICAgICAgaWYgKGFubm90YXRpb25zLnVuZGVybGluZSlcbiAgICAgICAgICAgICAgICB0ZXh0ID0gbWQudW5kZXJsaW5lKHRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsZWFkaW5nX3NwYWNlICsgdGV4dCArIHRyYWlsaW5nX3NwYWNlO1xuICAgIH1cbn1cbmV4cG9ydHMuTm90aW9uVG9NYXJrZG93biA9IE5vdGlvblRvTWFya2Rvd247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub3Rpb24tdG8tbWQuanMubWFwIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsIk9iamVjdCIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9fZXNNb2R1bGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fc2V0TW9kdWxlRGVmYXVsdCIsInYiLCJ2YWx1ZSIsIl9faW1wb3J0U3RhciIsIm1vZCIsInJlc3VsdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImV4cG9ydHMiLCJOb3Rpb25Ub01hcmtkb3duIiwibWQiLCJyZXF1aXJlIiwibm90aW9uXzEiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJub3Rpb25DbGllbnQiLCJkZWZhdWx0Q29uZmlnIiwic2VwYXJhdGVDaGlsZFBhZ2UiLCJjb252ZXJ0SW1hZ2VzVG9CYXNlNjQiLCJwYXJzZUNoaWxkUGFnZXMiLCJjb25maWciLCJjdXN0b21UcmFuc2Zvcm1lcnMiLCJzZXRDdXN0b21UcmFuc2Zvcm1lciIsInR5cGUiLCJ0cmFuc2Zvcm1lciIsInRvTWFya2Rvd25TdHJpbmciLCJtZEJsb2NrcyIsInBhZ2VJZGVudGlmaWVyIiwibmVzdGluZ0xldmVsIiwibWRPdXRwdXQiLCJmb3JFYWNoIiwiX2EiLCJwYXJlbnQiLCJhZGRUYWJTcGFjZSIsImNoaWxkcmVuIiwibGVuZ3RoIiwibWRzdHIiLCJrZXlzIiwia2V5IiwiY2hpbGRQYWdlVGl0bGUiLCJ0b2dnbGVfY2hpbGRyZW5fbWRfc3RyaW5nIiwidG9nZ2xlIiwiZm9ybWF0dGVkQ29udGVudCIsInNwbGl0IiwibWFwIiwibGluZSIsInRyaW0iLCJqb2luIiwicGFnZVRvTWFya2Rvd24iLCJpZCIsInRvdGFsUGFnZSIsIkVycm9yIiwiYmxvY2tzIiwiZ2V0QmxvY2tDaGlsZHJlbiIsInBhcnNlZERhdGEiLCJibG9ja3NUb01hcmtkb3duIiwiX2IiLCJpIiwiYmxvY2siLCJoYXNfY2hpbGRyZW4iLCJibG9ja19pZCIsInN5bmNlZF9ibG9jayIsInN5bmNlZF9mcm9tIiwiY2hpbGRfYmxvY2tzIiwicHVzaCIsImJsb2NrSWQiLCJibG9ja1RvTWFya2Rvd24iLCJsIiwidG1wIiwiY3VzdG9tVHJhbnNmb3JtZXJWYWx1ZSIsImJsb2NrQ29udGVudCIsImltYWdlIiwiaW1hZ2VfdGl0bGUiLCJpbWFnZV9jYXB0aW9uX3BsYWluIiwiY2FwdGlvbiIsIml0ZW0iLCJwbGFpbl90ZXh0IiwiaW1hZ2VfdHlwZSIsImxpbmsiLCJleHRlcm5hbCIsInVybCIsImZpbGUiLCJtYXRjaGVzIiwibWF0Y2giLCJkaXZpZGVyIiwiZXF1YXRpb24iLCJleHByZXNzaW9uIiwidGl0bGUiLCJ2aWRlbyIsInBkZiIsImZpbGVfdHlwZSIsImJvb2ttYXJrIiwiZW1iZWQiLCJsaW5rX3ByZXZpZXciLCJsaW5rX3RvX3BhZ2UiLCJwYWdlX2lkIiwicGFnZVRpdGxlIiwiY2hpbGRfcGFnZSIsImhlYWRpbmcyIiwiY2hpbGRfZGF0YWJhc2UiLCJ0YWJsZUFyciIsInRhYmxlUm93cyIsInJvd3NQcm9taXNlIiwicm93IiwiY2VsbHMiLCJ0YWJsZV9yb3ciLCJjZWxsU3RyaW5nUHJvbWlzZSIsImNlbGwiLCJwYXJhZ3JhcGgiLCJyaWNoX3RleHQiLCJjZWxsU3RyaW5nQXJyIiwiUHJvbWlzZSIsImFsbCIsInRhYmxlIiwidGV4dCIsImNvbnRlbnQiLCJpbmxpbmVFcXVhdGlvbiIsImFubm90YXRpb25zIiwiYW5ub3RhdGVQbGFpblRleHQiLCJjb2RlQ29udGVudCIsImNvZGUiLCJ0IiwibGFuZ3VhZ2UiLCJjb2RlQmxvY2siLCJoZWFkaW5nMSIsImhlYWRpbmczIiwicXVvdGUiLCJjYWxsb3V0X3N0cmluZyIsImNhbGxvdXQiLCJpY29uIiwiY2FsbG91dF9jaGlsZHJlbl9vYmplY3QiLCJjYWxsb3V0X2NoaWxkcmVuIiwiY2hpbGQiLCJidWxsZXQiLCJudW1iZXJlZF9saXN0X2l0ZW0iLCJudW1iZXIiLCJ0b2RvIiwidG9fZG8iLCJjaGVja2VkIiwibGVhZGluZ1NwYWNlTWF0Y2giLCJ0cmFpbGluZ1NwYWNlTWF0Y2giLCJsZWFkaW5nX3NwYWNlIiwidHJhaWxpbmdfc3BhY2UiLCJpbmxpbmVDb2RlIiwiYm9sZCIsIml0YWxpYyIsInN0cmlrZXRocm91Z2giLCJ1bmRlcmxpbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/notion-to-md/build/notion-to-md.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/notion-to-md/build/utils/md.js":
/*!*****************************************************!*\
  !*** ./node_modules/notion-to-md/build/utils/md.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.table = exports.toggle = exports.divider = exports.addTabSpace = exports.image = exports.todo = exports.bullet = exports.callout = exports.quote = exports.heading3 = exports.heading2 = exports.heading1 = exports.equation = exports.codeBlock = exports.link = exports.underline = exports.strikethrough = exports.italic = exports.bold = exports.inlineEquation = exports.inlineCode = void 0;\nconst markdown_table_1 = __importDefault(__webpack_require__(/*! markdown-table */ \"(rsc)/./node_modules/markdown-table/index.js\"));\nconst node_fetch_1 = __importDefault(__webpack_require__(/*! node-fetch */ \"(rsc)/./node_modules/node-fetch/lib/index.mjs\"));\nconst inlineCode = (text)=>{\n    return `\\`${text}\\``;\n};\nexports.inlineCode = inlineCode;\nconst inlineEquation = (text)=>{\n    return `$${text}$`;\n};\nexports.inlineEquation = inlineEquation;\nconst bold = (text)=>{\n    return `**${text}**`;\n};\nexports.bold = bold;\nconst italic = (text)=>{\n    return `_${text}_`;\n};\nexports.italic = italic;\nconst strikethrough = (text)=>{\n    return `~~${text}~~`;\n};\nexports.strikethrough = strikethrough;\nconst underline = (text)=>{\n    return `<u>${text}</u>`;\n};\nexports.underline = underline;\nconst link = (text, href)=>{\n    return `[${text}](${href})`;\n};\nexports.link = link;\nconst codeBlock = (text, language)=>{\n    if (!text) return \"\";\n    // Ensure a valid language, default to \"plaintext\" if missing\n    const lang = language && language.trim() ? language.toLowerCase() : \"plaintext\";\n    return `\\`\\`\\`${lang}\n${text.trim()}\n\\`\\`\\``;\n};\nexports.codeBlock = codeBlock;\nconst equation = (text)=>{\n    return `$$\n${text}\n$$`;\n};\nexports.equation = equation;\nconst heading1 = (text)=>{\n    return `# ${text}`;\n};\nexports.heading1 = heading1;\nconst heading2 = (text)=>{\n    return `## ${text}`;\n};\nexports.heading2 = heading2;\nconst heading3 = (text)=>{\n    return `### ${text}`;\n};\nexports.heading3 = heading3;\nconst quote = (text)=>{\n    // the replace is done to handle multiple lines\n    return `> ${text.replace(/\\n/g, \"  \\n> \")}`;\n};\nexports.quote = quote;\nconst callout = (text, icon)=>{\n    let emoji;\n    if ((icon === null || icon === void 0 ? void 0 : icon.type) === \"emoji\") {\n        emoji = icon.emoji;\n    }\n    // the replace is done to handle multiple lines\n    const formattedText = text.replace(/\\n/g, \"  \\n> \");\n    const formattedEmoji = emoji ? emoji + \" \" : \"\";\n    const headingMatch = formattedText.match(/^(#{1,6})\\s+([.*\\s\\S]+)/);\n    if (headingMatch) {\n        const headingLevel = headingMatch[1].length;\n        const headingContent = headingMatch[2];\n        return `> ${\"#\".repeat(headingLevel)} ${formattedEmoji}${headingContent}`;\n    }\n    return `> ${formattedEmoji}${formattedText}`;\n};\nexports.callout = callout;\nconst bullet = (text, count)=>{\n    let renderText = text.trim();\n    return count ? `${count}. ${renderText}` : `- ${renderText}`;\n};\nexports.bullet = bullet;\nconst todo = (text, checked)=>{\n    return checked ? `- [x] ${text}` : `- [ ] ${text}`;\n};\nexports.todo = todo;\nconst image = async (alt, href, convertToBase64 = false)=>{\n    // In case the user does not want to convert the images to Base64\n    // or the image is already base64\n    if (!convertToBase64 || href.startsWith(\"data:\")) {\n        if (href.startsWith(\"data:\")) {\n            // Extract base64 data, i.e. the string after 'data:mime/type;base64,'\n            const base64 = href.split(\",\").pop();\n            // This overrides incorrect data: string format to png\n            // so that browsers can correctly render the data\n            return `![${alt}](data:image/png;base64,${base64})`;\n        }\n        return `![${alt}](${href})`;\n    } else {\n        // Otherwise, download the image and convert it to base64\n        const res = await (0, node_fetch_1.default)(href);\n        const buf = await res.arrayBuffer();\n        const base64 = Buffer.from(buf).toString(\"base64\");\n        return `![${alt}](data:image/png;base64,${base64})`;\n    }\n};\nexports.image = image;\nconst addTabSpace = (text, n = 0)=>{\n    const tab = \"    \";\n    for(let i = 0; i < n; i++){\n        if (text.includes(\"\\n\")) {\n            const multiLineText = text.split(/(?:^|\\n)/).join(`\\n${tab}`);\n            text = tab + multiLineText;\n        } else text = tab + text;\n    }\n    return text;\n};\nexports.addTabSpace = addTabSpace;\nconst divider = ()=>{\n    return \"---\";\n};\nexports.divider = divider;\nconst toggle = (summary, children)=>{\n    if (!summary) return children || \"\";\n    return `<details>\n<summary>${summary}</summary>\n${children || \"\"}\n</details>\\n\\n`;\n};\nexports.toggle = toggle;\nconst table = (cells)=>{\n    return (0, markdown_table_1.default)(cells);\n};\nexports.table = table; //# sourceMappingURL=md.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbm90aW9uLXRvLW1kL2J1aWxkL3V0aWxzL21kLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsSUFBSUEsa0JBQWtCLENBQUMsTUFBRyxLQUFLLE9BQUcsRUFBRUEsZUFBZSxJQUFLLFNBQVVDLEdBQUc7SUFDakUsT0FBTyxPQUFRQSxJQUFJQyxVQUFVLEdBQUlELE1BQU07UUFBRSxXQUFXQTtJQUFJO0FBQzVEO0FBQ0FFLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxhQUFhLEdBQUdBLGNBQWMsR0FBR0EsZUFBZSxHQUFHQSxtQkFBbUIsR0FBR0EsYUFBYSxHQUFHQSxZQUFZLEdBQUdBLGNBQWMsR0FBR0EsZUFBZSxHQUFHQSxhQUFhLEdBQUdBLGdCQUFnQixHQUFHQSxnQkFBZ0IsR0FBR0EsZ0JBQWdCLEdBQUdBLGdCQUFnQixHQUFHQSxpQkFBaUIsR0FBR0EsWUFBWSxHQUFHQSxpQkFBaUIsR0FBR0EscUJBQXFCLEdBQUdBLGNBQWMsR0FBR0EsWUFBWSxHQUFHQSxzQkFBc0IsR0FBR0Esa0JBQWtCLEdBQUcsS0FBSztBQUN6WSxNQUFNdUIsbUJBQW1CNUIsZ0JBQWdCNkIsbUJBQU9BLENBQUMsb0VBQWdCO0FBQ2pFLE1BQU1DLGVBQWU5QixnQkFBZ0I2QixtQkFBT0EsQ0FBQyxpRUFBWTtBQUN6RCxNQUFNRixhQUFhLENBQUNJO0lBQ2hCLE9BQU8sQ0FBQyxFQUFFLEVBQUVBLEtBQUssRUFBRSxDQUFDO0FBQ3hCO0FBQ0ExQixrQkFBa0IsR0FBR3NCO0FBQ3JCLE1BQU1ELGlCQUFpQixDQUFDSztJQUNwQixPQUFPLENBQUMsQ0FBQyxFQUFFQSxLQUFLLENBQUMsQ0FBQztBQUN0QjtBQUNBMUIsc0JBQXNCLEdBQUdxQjtBQUN6QixNQUFNRCxPQUFPLENBQUNNO0lBQ1YsT0FBTyxDQUFDLEVBQUUsRUFBRUEsS0FBSyxFQUFFLENBQUM7QUFDeEI7QUFDQTFCLFlBQVksR0FBR29CO0FBQ2YsTUFBTUQs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RUosSUFBSSxDQUFDO1lBQzVEbkMsT0FBT21DLE1BQU1HO1FBQ2pCLE9BRUl0QyxPQUFPbUMsTUFBTW5DO0lBQ3JCO0lBQ0EsT0FBT0E7QUFDWDtBQUNBMUIsbUJBQW1CLEdBQUdLO0FBQ3RCLE1BQU1ELFVBQVU7SUFDWixPQUFPO0FBQ1g7QUFDQUosZUFBZSxHQUFHSTtBQUNsQixNQUFNRCxTQUFTLENBQUMrRCxTQUFTQztJQUNyQixJQUFJLENBQUNELFNBQ0QsT0FBT0MsWUFBWTtJQUN2QixPQUFPLENBQUM7U0FDSCxFQUFFRCxRQUFRO0FBQ25CLEVBQUVDLFlBQVksR0FBRztjQUNILENBQUM7QUFDZjtBQUNBbkUsY0FBYyxHQUFHRztBQUNqQixNQUFNRCxRQUFRLENBQUNrRTtJQUNYLE9BQU8sQ0FBQyxHQUFHN0MsaUJBQWlCK0IsT0FBTyxFQUFFYztBQUN6QztBQUNBcEUsYUFBYSxHQUFHRSxPQUNoQiw4QkFBOEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXRoZXJpbmUtcG9ydGZvbGlvLy4vbm9kZV9tb2R1bGVzL25vdGlvbi10by1tZC9idWlsZC91dGlscy9tZC5qcz85NjNhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy50YWJsZSA9IGV4cG9ydHMudG9nZ2xlID0gZXhwb3J0cy5kaXZpZGVyID0gZXhwb3J0cy5hZGRUYWJTcGFjZSA9IGV4cG9ydHMuaW1hZ2UgPSBleHBvcnRzLnRvZG8gPSBleHBvcnRzLmJ1bGxldCA9IGV4cG9ydHMuY2FsbG91dCA9IGV4cG9ydHMucXVvdGUgPSBleHBvcnRzLmhlYWRpbmczID0gZXhwb3J0cy5oZWFkaW5nMiA9IGV4cG9ydHMuaGVhZGluZzEgPSBleHBvcnRzLmVxdWF0aW9uID0gZXhwb3J0cy5jb2RlQmxvY2sgPSBleHBvcnRzLmxpbmsgPSBleHBvcnRzLnVuZGVybGluZSA9IGV4cG9ydHMuc3RyaWtldGhyb3VnaCA9IGV4cG9ydHMuaXRhbGljID0gZXhwb3J0cy5ib2xkID0gZXhwb3J0cy5pbmxpbmVFcXVhdGlvbiA9IGV4cG9ydHMuaW5saW5lQ29kZSA9IHZvaWQgMDtcbmNvbnN0IG1hcmtkb3duX3RhYmxlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm1hcmtkb3duLXRhYmxlXCIpKTtcbmNvbnN0IG5vZGVfZmV0Y2hfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibm9kZS1mZXRjaFwiKSk7XG5jb25zdCBpbmxpbmVDb2RlID0gKHRleHQpID0+IHtcbiAgICByZXR1cm4gYFxcYCR7dGV4dH1cXGBgO1xufTtcbmV4cG9ydHMuaW5saW5lQ29kZSA9IGlubGluZUNvZGU7XG5jb25zdCBpbmxpbmVFcXVhdGlvbiA9ICh0ZXh0KSA9PiB7XG4gICAgcmV0dXJuIGAkJHt0ZXh0fSRgO1xufTtcbmV4cG9ydHMuaW5saW5lRXF1YXRpb24gPSBpbmxpbmVFcXVhdGlvbjtcbmNvbnN0IGJvbGQgPSAodGV4dCkgPT4ge1xuICAgIHJldHVybiBgKioke3RleHR9KipgO1xufTtcbmV4cG9ydHMuYm9sZCA9IGJvbGQ7XG5jb25zdCBpdGFsaWMgPSAodGV4dCkgPT4ge1xuICAgIHJldHVybiBgXyR7dGV4dH1fYDtcbn07XG5leHBvcnRzLml0YWxpYyA9IGl0YWxpYztcbmNvbnN0IHN0cmlrZXRocm91Z2ggPSAodGV4dCkgPT4ge1xuICAgIHJldHVybiBgfn4ke3RleHR9fn5gO1xufTtcbmV4cG9ydHMuc3RyaWtldGhyb3VnaCA9IHN0cmlrZXRocm91Z2g7XG5jb25zdCB1bmRlcmxpbmUgPSAodGV4dCkgPT4ge1xuICAgIHJldHVybiBgPHU+JHt0ZXh0fTwvdT5gO1xufTtcbmV4cG9ydHMudW5kZXJsaW5lID0gdW5kZXJsaW5lO1xuY29uc3QgbGluayA9ICh0ZXh0LCBocmVmKSA9PiB7XG4gICAgcmV0dXJuIGBbJHt0ZXh0fV0oJHtocmVmfSlgO1xufTtcbmV4cG9ydHMubGluayA9IGxpbms7XG5jb25zdCBjb2RlQmxvY2sgPSAodGV4dCwgbGFuZ3VhZ2UpID0+IHtcbiAgICBpZiAoIXRleHQpXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIC8vIEVuc3VyZSBhIHZhbGlkIGxhbmd1YWdlLCBkZWZhdWx0IHRvIFwicGxhaW50ZXh0XCIgaWYgbWlzc2luZ1xuICAgIGNvbnN0IGxhbmcgPSBsYW5ndWFnZSAmJiBsYW5ndWFnZS50cmltKCkgPyBsYW5ndWFnZS50b0xvd2VyQ2FzZSgpIDogXCJwbGFpbnRleHRcIjtcbiAgICByZXR1cm4gYFxcYFxcYFxcYCR7bGFuZ31cbiR7dGV4dC50cmltKCl9XG5cXGBcXGBcXGBgO1xufTtcbmV4cG9ydHMuY29kZUJsb2NrID0gY29kZUJsb2NrO1xuY29uc3QgZXF1YXRpb24gPSAodGV4dCkgPT4ge1xuICAgIHJldHVybiBgJCRcbiR7dGV4dH1cbiQkYDtcbn07XG5leHBvcnRzLmVxdWF0aW9uID0gZXF1YXRpb247XG5jb25zdCBoZWFkaW5nMSA9ICh0ZXh0KSA9PiB7XG4gICAgcmV0dXJuIGAjICR7dGV4dH1gO1xufTtcbmV4cG9ydHMuaGVhZGluZzEgPSBoZWFkaW5nMTtcbmNvbnN0IGhlYWRpbmcyID0gKHRleHQpID0+IHtcbiAgICByZXR1cm4gYCMjICR7dGV4dH1gO1xufTtcbmV4cG9ydHMuaGVhZGluZzIgPSBoZWFkaW5nMjtcbmNvbnN0IGhlYWRpbmczID0gKHRleHQpID0+IHtcbiAgICByZXR1cm4gYCMjIyAke3RleHR9YDtcbn07XG5leHBvcnRzLmhlYWRpbmczID0gaGVhZGluZzM7XG5jb25zdCBxdW90ZSA9ICh0ZXh0KSA9PiB7XG4gICAgLy8gdGhlIHJlcGxhY2UgaXMgZG9uZSB0byBoYW5kbGUgbXVsdGlwbGUgbGluZXNcbiAgICByZXR1cm4gYD4gJHt0ZXh0LnJlcGxhY2UoL1xcbi9nLCBcIiAgXFxuPiBcIil9YDtcbn07XG5leHBvcnRzLnF1b3RlID0gcXVvdGU7XG5jb25zdCBjYWxsb3V0ID0gKHRleHQsIGljb24pID0+IHtcbiAgICBsZXQgZW1vamk7XG4gICAgaWYgKChpY29uID09PSBudWxsIHx8IGljb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGljb24udHlwZSkgPT09IFwiZW1vamlcIikge1xuICAgICAgICBlbW9qaSA9IGljb24uZW1vamk7XG4gICAgfVxuICAgIC8vIHRoZSByZXBsYWNlIGlzIGRvbmUgdG8gaGFuZGxlIG11bHRpcGxlIGxpbmVzXG4gICAgY29uc3QgZm9ybWF0dGVkVGV4dCA9IHRleHQucmVwbGFjZSgvXFxuL2csIFwiICBcXG4+IFwiKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRFbW9qaSA9IGVtb2ppID8gZW1vamkgKyBcIiBcIiA6IFwiXCI7XG4gICAgY29uc3QgaGVhZGluZ01hdGNoID0gZm9ybWF0dGVkVGV4dC5tYXRjaCgvXigjezEsNn0pXFxzKyhbLipcXHNcXFNdKykvKTtcbiAgICBpZiAoaGVhZGluZ01hdGNoKSB7XG4gICAgICAgIGNvbnN0IGhlYWRpbmdMZXZlbCA9IGhlYWRpbmdNYXRjaFsxXS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGhlYWRpbmdDb250ZW50ID0gaGVhZGluZ01hdGNoWzJdO1xuICAgICAgICByZXR1cm4gYD4gJHtcIiNcIi5yZXBlYXQoaGVhZGluZ0xldmVsKX0gJHtmb3JtYXR0ZWRFbW9qaX0ke2hlYWRpbmdDb250ZW50fWA7XG4gICAgfVxuICAgIHJldHVybiBgPiAke2Zvcm1hdHRlZEVtb2ppfSR7Zm9ybWF0dGVkVGV4dH1gO1xufTtcbmV4cG9ydHMuY2FsbG91dCA9IGNhbGxvdXQ7XG5jb25zdCBidWxsZXQgPSAodGV4dCwgY291bnQpID0+IHtcbiAgICBsZXQgcmVuZGVyVGV4dCA9IHRleHQudHJpbSgpO1xuICAgIHJldHVybiBjb3VudCA/IGAke2NvdW50fS4gJHtyZW5kZXJUZXh0fWAgOiBgLSAke3JlbmRlclRleHR9YDtcbn07XG5leHBvcnRzLmJ1bGxldCA9IGJ1bGxldDtcbmNvbnN0IHRvZG8gPSAodGV4dCwgY2hlY2tlZCkgPT4ge1xuICAgIHJldHVybiBjaGVja2VkID8gYC0gW3hdICR7dGV4dH1gIDogYC0gWyBdICR7dGV4dH1gO1xufTtcbmV4cG9ydHMudG9kbyA9IHRvZG87XG5jb25zdCBpbWFnZSA9IGFzeW5jIChhbHQsIGhyZWYsIGNvbnZlcnRUb0Jhc2U2NCA9IGZhbHNlKSA9PiB7XG4gICAgLy8gSW4gY2FzZSB0aGUgdXNlciBkb2VzIG5vdCB3YW50IHRvIGNvbnZlcnQgdGhlIGltYWdlcyB0byBCYXNlNjRcbiAgICAvLyBvciB0aGUgaW1hZ2UgaXMgYWxyZWFkeSBiYXNlNjRcbiAgICBpZiAoIWNvbnZlcnRUb0Jhc2U2NCB8fCBocmVmLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkge1xuICAgICAgICBpZiAoaHJlZi5zdGFydHNXaXRoKFwiZGF0YTpcIikpIHtcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgYmFzZTY0IGRhdGEsIGkuZS4gdGhlIHN0cmluZyBhZnRlciAnZGF0YTptaW1lL3R5cGU7YmFzZTY0LCdcbiAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGhyZWYuc3BsaXQoXCIsXCIpLnBvcCgpO1xuICAgICAgICAgICAgLy8gVGhpcyBvdmVycmlkZXMgaW5jb3JyZWN0IGRhdGE6IHN0cmluZyBmb3JtYXQgdG8gcG5nXG4gICAgICAgICAgICAvLyBzbyB0aGF0IGJyb3dzZXJzIGNhbiBjb3JyZWN0bHkgcmVuZGVyIHRoZSBkYXRhXG4gICAgICAgICAgICByZXR1cm4gYCFbJHthbHR9XShkYXRhOmltYWdlL3BuZztiYXNlNjQsJHtiYXNlNjR9KWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAhWyR7YWx0fV0oJHtocmVmfSlgO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBkb3dubG9hZCB0aGUgaW1hZ2UgYW5kIGNvbnZlcnQgaXQgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0ICgwLCBub2RlX2ZldGNoXzEuZGVmYXVsdCkoaHJlZik7XG4gICAgICAgIGNvbnN0IGJ1ZiA9IGF3YWl0IHJlcy5hcnJheUJ1ZmZlcigpO1xuICAgICAgICBjb25zdCBiYXNlNjQgPSBCdWZmZXIuZnJvbShidWYpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICAgICAgICByZXR1cm4gYCFbJHthbHR9XShkYXRhOmltYWdlL3BuZztiYXNlNjQsJHtiYXNlNjR9KWA7XG4gICAgfVxufTtcbmV4cG9ydHMuaW1hZ2UgPSBpbWFnZTtcbmNvbnN0IGFkZFRhYlNwYWNlID0gKHRleHQsIG4gPSAwKSA9PiB7XG4gICAgY29uc3QgdGFiID0gXCIgICAgXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgaWYgKHRleHQuaW5jbHVkZXMoXCJcXG5cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IG11bHRpTGluZVRleHQgPSB0ZXh0LnNwbGl0KC8oPzpefFxcbikvKS5qb2luKGBcXG4ke3RhYn1gKTtcbiAgICAgICAgICAgIHRleHQgPSB0YWIgKyBtdWx0aUxpbmVUZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRleHQgPSB0YWIgKyB0ZXh0O1xuICAgIH1cbiAgICByZXR1cm4gdGV4dDtcbn07XG5leHBvcnRzLmFkZFRhYlNwYWNlID0gYWRkVGFiU3BhY2U7XG5jb25zdCBkaXZpZGVyID0gKCkgPT4ge1xuICAgIHJldHVybiBcIi0tLVwiO1xufTtcbmV4cG9ydHMuZGl2aWRlciA9IGRpdmlkZXI7XG5jb25zdCB0b2dnbGUgPSAoc3VtbWFyeSwgY2hpbGRyZW4pID0+IHtcbiAgICBpZiAoIXN1bW1hcnkpXG4gICAgICAgIHJldHVybiBjaGlsZHJlbiB8fCBcIlwiO1xuICAgIHJldHVybiBgPGRldGFpbHM+XG48c3VtbWFyeT4ke3N1bW1hcnl9PC9zdW1tYXJ5PlxuJHtjaGlsZHJlbiB8fCBcIlwifVxuPC9kZXRhaWxzPlxcblxcbmA7XG59O1xuZXhwb3J0cy50b2dnbGUgPSB0b2dnbGU7XG5jb25zdCB0YWJsZSA9IChjZWxscykgPT4ge1xuICAgIHJldHVybiAoMCwgbWFya2Rvd25fdGFibGVfMS5kZWZhdWx0KShjZWxscyk7XG59O1xuZXhwb3J0cy50YWJsZSA9IHRhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWQuanMubWFwIl0sIm5hbWVzIjpbIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInRhYmxlIiwidG9nZ2xlIiwiZGl2aWRlciIsImFkZFRhYlNwYWNlIiwiaW1hZ2UiLCJ0b2RvIiwiYnVsbGV0IiwiY2FsbG91dCIsInF1b3RlIiwiaGVhZGluZzMiLCJoZWFkaW5nMiIsImhlYWRpbmcxIiwiZXF1YXRpb24iLCJjb2RlQmxvY2siLCJsaW5rIiwidW5kZXJsaW5lIiwic3RyaWtldGhyb3VnaCIsIml0YWxpYyIsImJvbGQiLCJpbmxpbmVFcXVhdGlvbiIsImlubGluZUNvZGUiLCJtYXJrZG93bl90YWJsZV8xIiwicmVxdWlyZSIsIm5vZGVfZmV0Y2hfMSIsInRleHQiLCJocmVmIiwibGFuZ3VhZ2UiLCJsYW5nIiwidHJpbSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsImljb24iLCJlbW9qaSIsInR5cGUiLCJmb3JtYXR0ZWRUZXh0IiwiZm9ybWF0dGVkRW1vamkiLCJoZWFkaW5nTWF0Y2giLCJtYXRjaCIsImhlYWRpbmdMZXZlbCIsImxlbmd0aCIsImhlYWRpbmdDb250ZW50IiwicmVwZWF0IiwiY291bnQiLCJyZW5kZXJUZXh0IiwiY2hlY2tlZCIsImFsdCIsImNvbnZlcnRUb0Jhc2U2NCIsInN0YXJ0c1dpdGgiLCJiYXNlNjQiLCJzcGxpdCIsInBvcCIsInJlcyIsImRlZmF1bHQiLCJidWYiLCJhcnJheUJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsIm4iLCJ0YWIiLCJpIiwiaW5jbHVkZXMiLCJtdWx0aUxpbmVUZXh0Iiwiam9pbiIsInN1bW1hcnkiLCJjaGlsZHJlbiIsImNlbGxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/notion-to-md/build/utils/md.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/notion-to-md/build/utils/notion.js":
/*!*********************************************************!*\
  !*** ./node_modules/notion-to-md/build/utils/notion.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.modifyNumberedListObject = exports.getBlockChildren = void 0;\nconst getBlockChildren = async (notionClient, block_id, totalPage)=>{\n    let result = [];\n    let pageCount = 0;\n    let start_cursor = undefined;\n    do {\n        const response = await notionClient.blocks.children.list({\n            start_cursor: start_cursor,\n            block_id: block_id\n        });\n        result.push(...response.results);\n        start_cursor = response === null || response === void 0 ? void 0 : response.next_cursor;\n        pageCount += 1;\n    }while (start_cursor != null && (totalPage == null || pageCount < totalPage));\n    (0, exports.modifyNumberedListObject)(result);\n    return result;\n};\nexports.getBlockChildren = getBlockChildren;\nconst modifyNumberedListObject = (blocks)=>{\n    let numberedListIndex = 0;\n    for (const block of blocks){\n        if (\"type\" in block && block.type === \"numbered_list_item\") {\n            // add numbers\n            // @ts-ignore\n            block.numbered_list_item.number = ++numberedListIndex;\n        } else {\n            numberedListIndex = 0;\n        }\n    }\n};\nexports.modifyNumberedListObject = modifyNumberedListObject; //# sourceMappingURL=notion.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbm90aW9uLXRvLW1kL2J1aWxkL3V0aWxzL25vdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZ0NBQWdDLEdBQUdBLHdCQUF3QixHQUFHLEtBQUs7QUFDbkUsTUFBTUcsbUJBQW1CLE9BQU9DLGNBQWNDLFVBQVVDO0lBQ3BELElBQUlDLFNBQVMsRUFBRTtJQUNmLElBQUlDLFlBQVk7SUFDaEIsSUFBSUMsZUFBZUM7SUFDbkIsR0FBRztRQUNDLE1BQU1DLFdBQVksTUFBTVAsYUFBYVEsTUFBTSxDQUFDQyxRQUFRLENBQUNDLElBQUksQ0FBQztZQUN0REwsY0FBY0E7WUFDZEosVUFBVUE7UUFDZDtRQUNBRSxPQUFPUSxJQUFJLElBQUlKLFNBQVNLLE9BQU87UUFDL0JQLGVBQWVFLGFBQWEsUUFBUUEsYUFBYSxLQUFLLElBQUksS0FBSyxJQUFJQSxTQUFTTSxXQUFXO1FBQ3ZGVCxhQUFhO0lBQ2pCLFFBQVNDLGdCQUFnQixRQUNwQkgsQ0FBQUEsYUFBYSxRQUFRRSxZQUFZRixTQUFRLEdBQUk7SUFDakQsSUFBR04sUUFBUUUsd0JBQXdCLEVBQUVLO0lBQ3RDLE9BQU9BO0FBQ1g7QUFDQVAsd0JBQXdCLEdBQUdHO0FBQzNCLE1BQU1ELDJCQUEyQixDQUFDVTtJQUM5QixJQUFJTSxvQkFBb0I7SUFDeEIsS0FBSyxNQUFNQyxTQUFTUCxPQUFRO1FBQ3hCLElBQUksVUFBVU8sU0FBU0EsTUFBTUMsSUFBSSxLQUFLLHNCQUFzQjtZQUN4RCxjQUFjO1lBQ2QsYUFBYTtZQUNiRCxNQUFNRSxrQkFBa0IsQ0FBQ0MsTUFBTSxHQUFHLEVBQUVKO1FBQ3hDLE9BQ0s7WUFDREEsb0JBQW9CO1FBQ3hCO0lBQ0o7QUFDSjtBQUNBbEIsZ0NBQWdDLEdBQUdFLDBCQUNuQyxrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXRoZXJpbmUtcG9ydGZvbGlvLy4vbm9kZV9tb2R1bGVzL25vdGlvbi10by1tZC9idWlsZC91dGlscy9ub3Rpb24uanM/YmEzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubW9kaWZ5TnVtYmVyZWRMaXN0T2JqZWN0ID0gZXhwb3J0cy5nZXRCbG9ja0NoaWxkcmVuID0gdm9pZCAwO1xuY29uc3QgZ2V0QmxvY2tDaGlsZHJlbiA9IGFzeW5jIChub3Rpb25DbGllbnQsIGJsb2NrX2lkLCB0b3RhbFBhZ2UpID0+IHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgbGV0IHBhZ2VDb3VudCA9IDA7XG4gICAgbGV0IHN0YXJ0X2N1cnNvciA9IHVuZGVmaW5lZDtcbiAgICBkbyB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gKGF3YWl0IG5vdGlvbkNsaWVudC5ibG9ja3MuY2hpbGRyZW4ubGlzdCh7XG4gICAgICAgICAgICBzdGFydF9jdXJzb3I6IHN0YXJ0X2N1cnNvcixcbiAgICAgICAgICAgIGJsb2NrX2lkOiBibG9ja19pZCxcbiAgICAgICAgfSkpO1xuICAgICAgICByZXN1bHQucHVzaCguLi5yZXNwb25zZS5yZXN1bHRzKTtcbiAgICAgICAgc3RhcnRfY3Vyc29yID0gcmVzcG9uc2UgPT09IG51bGwgfHwgcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3BvbnNlLm5leHRfY3Vyc29yO1xuICAgICAgICBwYWdlQ291bnQgKz0gMTtcbiAgICB9IHdoaWxlIChzdGFydF9jdXJzb3IgIT0gbnVsbCAmJlxuICAgICAgICAodG90YWxQYWdlID09IG51bGwgfHwgcGFnZUNvdW50IDwgdG90YWxQYWdlKSk7XG4gICAgKDAsIGV4cG9ydHMubW9kaWZ5TnVtYmVyZWRMaXN0T2JqZWN0KShyZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuZXhwb3J0cy5nZXRCbG9ja0NoaWxkcmVuID0gZ2V0QmxvY2tDaGlsZHJlbjtcbmNvbnN0IG1vZGlmeU51bWJlcmVkTGlzdE9iamVjdCA9IChibG9ja3MpID0+IHtcbiAgICBsZXQgbnVtYmVyZWRMaXN0SW5kZXggPSAwO1xuICAgIGZvciAoY29uc3QgYmxvY2sgb2YgYmxvY2tzKSB7XG4gICAgICAgIGlmIChcInR5cGVcIiBpbiBibG9jayAmJiBibG9jay50eXBlID09PSBcIm51bWJlcmVkX2xpc3RfaXRlbVwiKSB7XG4gICAgICAgICAgICAvLyBhZGQgbnVtYmVyc1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgYmxvY2subnVtYmVyZWRfbGlzdF9pdGVtLm51bWJlciA9ICsrbnVtYmVyZWRMaXN0SW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBudW1iZXJlZExpc3RJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG59O1xuZXhwb3J0cy5tb2RpZnlOdW1iZXJlZExpc3RPYmplY3QgPSBtb2RpZnlOdW1iZXJlZExpc3RPYmplY3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub3Rpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwibW9kaWZ5TnVtYmVyZWRMaXN0T2JqZWN0IiwiZ2V0QmxvY2tDaGlsZHJlbiIsIm5vdGlvbkNsaWVudCIsImJsb2NrX2lkIiwidG90YWxQYWdlIiwicmVzdWx0IiwicGFnZUNvdW50Iiwic3RhcnRfY3Vyc29yIiwidW5kZWZpbmVkIiwicmVzcG9uc2UiLCJibG9ja3MiLCJjaGlsZHJlbiIsImxpc3QiLCJwdXNoIiwicmVzdWx0cyIsIm5leHRfY3Vyc29yIiwibnVtYmVyZWRMaXN0SW5kZXgiLCJibG9jayIsInR5cGUiLCJudW1iZXJlZF9saXN0X2l0ZW0iLCJudW1iZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/notion-to-md/build/utils/notion.js\n");

/***/ })

};
;